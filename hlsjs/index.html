<!DOCTYPE html>
<meta charset="utf-8">
<html lang="ja">

<head>
    <meta charset="utf-8">
    <script src="https://cdn.jsdelivr.net/hls.js/latest/hls.min.js"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <script type="text/javascript" src="https://cdn.webrtc.ecl.ntt.com/skyway-latest.js"></script>
    <script type="text/javascript" src="./js/skywayEdit.js"></script>
    <script type="text/javascript" src="./js/editHLSjs.js"></script>

    <title>HLS.jsを使う</title>
</head>

<body>
    <input type="text" id="input-my-id">
    <button onclick="setMyID()">IDをセット</button><br>
    <span id="ID" style="font-size: 2em;">ID:</span><br>
    <video id="video" width=320 height=180></video>
    <button onclick="video.play()">動画を再生</button>
    <br>
    <span id="info"></span>


</body>

<script>
    var peer;
    var USERJSON;
    var count = 0;
    var i;
    var id;
    //idをセット
    function setMyID() {
        id = $("#input-my-id").val()
        $("#ID").text(`ID:${id}`)
        //skywayをセット
        peer = new Peer(id, { key: '12811376-9405-4d0c-bc52-1c95a4f4703f', debug: 3 });
        PeerDataReceiveFunction();

        //tsファイルを探すカウントアップを初期化、DOM表示も初期化
        count = 0;
        $("#info").text("")

        //idに対応したjsonファイルを取得
        $.getJSON(`./json/${id}.json`, function (data) {
            USERJSON = data;
            //hlsjsの設定へ -> editHLSjs
            newHls()
        });
    }

</script>