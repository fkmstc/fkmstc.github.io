<!DOCTYPE html>
<meta charset="utf-8">
<html lang="ja">

<head>
    <meta charset="utf-8">
    <script src="https://cdn.jsdelivr.net/hls.js/latest/hls.min.js"></script>
    <title>HLS.jsを使う</title>
</head>

<body>
    <video id="video"></video>
    <script>
        if (Hls.isSupported()) {
            var d = function (index, num) {
                return (`http://localhost/github/hlsjs/hls/PlayList${index}/PlayList${index}_Ts00${num}.ts`)
            }

            class fLoader extends Hls.DefaultConfig.loader {
                constructor(config) {
                    super(config);
                    var load = this.load.bind(this);

                    this.load = function (context, config, callbacks) {
                        var str = context.url;
                        str = context.frag.relurl

                        if (str == `Ts001.ts`) {
                            str = d(1, 1);
                        }
                        if (str == "Ts002.ts") {
                            str = d(2, 2);
                        }
                        if (str == "Ts003.ts") {
                            str = d(3, 3);
                        }
                        load(context, config, callbacks);
                    };
                }
            }

            var hls = new Hls({
                fLoader: fLoader,
            });


            var video = document.getElementById('video');
            hls.loadSource('./hls/Base.m3u8');
            hls.attachMedia(video);
            hls.on(Hls.Events.MANIFEST_PARSED, function () {
            });
        }


    </script>
</body>